

```
shop/
‚îú‚îÄ cmd/
‚îÇ  ‚îî‚îÄ app/
‚îÇ     ‚îî‚îÄ main.go
‚îú‚îÄ internal/
‚îÇ  ‚îú‚îÄ config/
‚îÇ  ‚îÇ  ‚îî‚îÄ config.go
‚îÇ  ‚îú‚îÄ platform/
‚îÇ  ‚îÇ  ‚îî‚îÄ server.go
‚îÇ  ‚îî‚îÄ transport/
‚îÇ     ‚îî‚îÄ httpx/
‚îÇ        ‚îú‚îÄ router.go
‚îÇ        ‚îú‚îÄ middleware.go
‚îÇ        ‚îî‚îÄ handlers/
‚îÇ           ‚îú‚îÄ health.go
‚îÇ           ‚îî‚îÄ home.go
‚îú‚îÄ web/
‚îÇ  ‚îú‚îÄ assets/
‚îÇ  ‚îÇ  ‚îî‚îÄ css/
‚îÇ  ‚îÇ     ‚îî‚îÄ style.css
‚îÇ  ‚îî‚îÄ templates/
‚îÇ     ‚îú‚îÄ layouts/
‚îÇ     ‚îÇ  ‚îî‚îÄ base.tmpl
‚îÇ     ‚îú‚îÄ partials/
‚îÇ     ‚îÇ  ‚îú‚îÄ nav.tmpl
‚îÇ     ‚îÇ  ‚îî‚îÄ footer.tmpl
‚îÇ     ‚îî‚îÄ pages/
‚îÇ        ‚îî‚îÄ home.tmpl
‚îú‚îÄ .env.example
‚îú‚îÄ go.mod
‚îî‚îÄ Makefile

```

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

### **cmd/app/main.go**

–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥, —Å–æ–∑–¥–∞—ë—Ç —Ä–æ—É—Ç–µ—Ä, –ø–æ–¥–Ω–∏–º–∞–µ—Ç HTTP-—Å–µ—Ä–≤–µ—Ä —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ graceful shutdown.

---

### **internal/config/config.go**

–ß–∏—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`APP_NAME`, `APP_ENV`, `HTTP_ADDR`).
–§–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É Config —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

---

### **internal/platform/server.go**

–§–∞–±—Ä–∏–∫–∞ `http.Server` —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤.
–ó–∞—â–∏—Ç–∞ –æ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –±–∞–∑–æ–≤—ã—Ö DoS-–∞—Ç–∞–∫.

---

### **internal/transport/httpx/middleware.go**

–ù–∞–±–æ—Ä –æ–±—â–∏—Ö middleware:
gzip, timeout, recoverer, real IP, request ID, –ª–æ–≥–≥–µ—Ä, secure headers (CSP –∏ –¥—Ä.).
–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å.

---

### **internal/transport/httpx/router.go**

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã:
`/`, `/healthz`, `/readyz`, `/metrics`, `/assets/*`.
–ü–æ–¥–∫–ª—é—á–∞–µ—Ç middleware –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫ 404/405.
–°–ª—É–∂–∏—Ç –∞–Ω–∞–ª–æ–≥–æ–º —Ñ–∞–π–ª–∞ `routes/web.php` –≤ Laravel.

---

### **internal/transport/httpx/handlers/**

–°–æ–¥–µ—Ä–∂–∏—Ç "–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã" –∏ —Ö–µ–Ω–¥–ª–µ—Ä—ã.

* **health.go** ‚Äî —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `/healthz` –∏ `/readyz` (–ø–æ–∫–∞ –±–µ–∑ –ë–î).
* **home.go** ‚Äî SSR-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–ì–ª–∞–≤–Ω–∞—è¬ª: –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —à–∞–±–ª–æ–Ω—ã, —Ä–µ–Ω–¥–µ—Ä–∏—Ç –¥–∞–Ω–Ω—ã–µ.

---

### **web/templates/**

HTML-—à–∞–±–ª–æ–Ω—ã –¥–ª—è SSR.

* **layouts/base.tmpl** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π layout (–æ–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã).
* **partials/nav.tmpl** ‚Äî —à–∞–ø–∫–∞ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è.
* **partials/footer.tmpl** ‚Äî —Ñ—É—Ç–µ—Ä (–≥–æ–¥ —á–µ—Ä–µ–∑ {{year}}).
* **pages/home.tmpl** ‚Äî –∫–æ–Ω—Ç–µ–Ω—Ç –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

---

### **web/assets/css/style.css**

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è layout –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.
–ü–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ `/assets/css/style.css`.

---

### **.env.example**

–®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
–∏–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –ø–æ—Ä—Ç.

---

### **Makefile**

–£–ø—Ä–æ—â—ë–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
`make run` ‚Äî –∑–∞–ø—É—Å–∫,
`make tidy` ‚Äî —Å–±–æ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π,
`make test` ‚Äî –ø—Ä–æ–≥–æ–Ω —Ç–µ—Å—Ç–æ–≤.

---

### **go.mod**

–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`chi`, `prometheus/client_golang`).



–∫–æ–º–ø–∞–∫—Ç–Ω—ã–π **–ø–ª–∞–Ω-–≥—Ä–∞—Ñ–∏–∫ MVP** –ø–æ —Å–ø—Ä–∏–Ω—Ç–∞–º —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –ø–∞–∫–µ—Ç–∞–º–∏ –∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ ‚Äú–≥–æ—Ç–æ–≤–æ‚Äù.

# –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ (—Ç–∞–±–ª–∏—Ü–∞)

| –°–ø—Ä–∏–Ω—Ç | –¶–µ–ª—å                | –ö–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏                                                                                                     | –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã/–∫—Ä–∏—Ç–µ—Ä–∏–∏ ‚Äú–≥–æ—Ç–æ–≤–æ‚Äù                                                      | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | –ü–∞–∫–µ—Ç—ã/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã                                      |
| ------ | ------------------- | ------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------- | ----------- | ------------------------------------------------------- |
| 1      | –ö–∞—Ä–∫–∞—Å + SSR-–±–∞–∑–∞   | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞; chi + middleware; layout + `/`, `/catalog` (–º–æ–∫–∏); —Å—Ç–∞—Ç–∏–∫–∞; healthcheck; Makefile                | `go run` —Å—Ç–∞—Ä—Ç—É–µ—Ç; `/` –∏ `/catalog` –æ—Ç–¥–∞—é—Ç HTML; `/healthz`=200; –ª–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç | ‚Äî           | `chi`, `chi/middleware`, `golangci-lint`                |
| 2      | –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–∏       | Docker Postgres; `migrations/0001_init.sql`; pgx; sqlc; –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `repo`                                           | `make migrate_up`; –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç `repo.Product.List()` –∑–µ–ª—ë–Ω—ã–π             | 1           | `pgx/v5`, `golang-migrate`, `sqlc`, `testcontainers-go` |
| 3      | –ö–∞—Ç–∞–ª–æ–≥ + —Ç–æ–≤–∞—Ä     | Handlers `/catalog`, `/catalog/{sku}`; —à–∞–±–ª–æ–Ω—ã; –ø–æ–∏—Å–∫/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞; seed –¥–∞–Ω–Ω—ã—Ö                                       | –ö–∞—Ç–∞–ª–æ–≥ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∏–∑ –ë–î; –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è; `httptest` –Ω–∞ –ª–∏—Å—Ç–∏–Ω–≥     | 2           | stdlib `net/http/httptest`                              |
| 4      | –ö–æ—Ä–∑–∏–Ω–∞ + Checkout  | –°–µ—Å—Å–∏–∏; `CartService`; `/cart`, `/checkout` (GET/POST); —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è Order                                            | –ü–æ–ª–Ω—ã–π –ø—É—Ç—å: –∫–∞—Ç–∞–ª–æ–≥ ‚Üí –∫–æ—Ä–∑–∏–Ω–∞ ‚Üí –∑–∞–∫–∞–∑ ‚Üí success; –∑–∞–ø–∏—Å—å –≤ –ë–î                    | 3           | `scs/v2` (sessions)                                     |
| 5      | –ê–¥–º–∏–Ω–∫–∞             | `/admin/login`; AuthService (bcrypt/argon2id); CRUD —Ç–æ–≤–∞—Ä–æ–≤; CSRF                                                   | –ê–¥–º–∏–Ω –ª–æ–≥–∏–Ω–∏—Ç—Å—è; —Å–æ–∑–¥–∞—ë—Ç/—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä; CSRF –≤–∫–ª—é—á—ë–Ω; rate-limit –ª–æ–≥–∏–Ω–∞      | 4           | `argon2id` –∏–ª–∏ `bcrypt`, `nosurf`, `httprate`           |
| 6      | JSON API + OpenAPI  | `/api/v1/products`, `/api/v1/product/{sku}`, `/api/v1/cart`, `/api/v1/order`; –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫; OpenAPI         | –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤ `api/openapi.yaml`; –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ                        | 3‚Äì5         | `kin-openapi` + `oapi-codegen` (–∏–ª–∏ swaggo)             |
| 7      | –ü—Ä–æ–¥–æ–≤–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | CSP/HSTS; TLS –∑–∞ reverse-proxy; `/metrics`; structured logs; Dockerfile/compose; CI (lint/test/build/image); –±—ç–∫–∞–ø—ã | HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç; Grafana –≤–∏–¥–∏—Ç –º–µ—Ç—Ä–∏–∫–∏; –æ–±—Ä–∞–∑ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è; nightly backup         | 1‚Äì6         | `promhttp`, `slog`, Docker, Compose, GitHub Actions     |
| 8      | –ü–æ–ª–∏—Ä–æ–≤–∫–∞/UX/SEO    | –ß–∏—Å—Ç—ã–π UI; i18n ru/fi; favicon, sitemap, robots; –º–æ–±–∏–ª—å–Ω—ã–π UX                                                       | Lighthouse ok; –±–∞–∑–æ–≤–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è; SEO-—Ç–µ–≥–∏                                     | 1‚Äì7         | ‚Äî                                                       |

# –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è):

* **2 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1** (–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω—É–∂–Ω–∞ –¥–æ –ë–î).
* **3 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2** (—Ä–µ–Ω–¥–µ—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ –∏–∑ –ë–î).
* **4 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 3** (—Ç–æ–≤–∞—Ä—ã —É–∂–µ –µ—Å—Ç—å).
* **5 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 4** (–∞–¥–º–∏–Ω–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏).
* **6 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 3‚Äì5** (API –ø–æ–≤–µ—Ä—Ö –≥–æ—Ç–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤/—Ä–µ–ø–æ).
* **7 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1‚Äì6** (–≤—Å—ë –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º –≤ –ø—Ä–æ–¥-–æ–∫—Ä—É–∂–µ–Ω–∏–µ).
* **8 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1‚Äì7** (–ø–æ–ª–∏—Ä—É–µ–º –ø–æ–≤–µ—Ä—Ö –≥–æ—Ç–æ–≤–æ–≥–æ).


# –†–∏—Å–∫–∏ –∏ –ø—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω—ã–µ –º–µ—Ä—ã (–∫—Ä–∞—Ç–∫–æ)

* **–°–ª–æ–∂–Ω–æ—Å—Ç—å SQL/–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –±–µ—Ä—ë–º `sqlc`, —Ä–∞–Ω–Ω–∏–µ –∏–Ω–¥–µ–∫—Å—ã, EXPLAIN.
* **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º:** `nosurf`, cookie `HttpOnly+Secure+SameSite`, —Å—Ç—Ä–æ–≥–∞—è CSP.
* **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –¥–µ–ø–ª–æ—è:** –º–∏–≥—Ä–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –∑–∞–ø—É—Å–∫–∞, blue/green –Ω–∞ —ç—Ç–∞–ø–µ 7.
* **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥:** –ª–∏–Ω—Ç–µ—Ä/—Ç–µ—Å—Ç—ã –≤ CI —Å –ø–µ—Ä–≤–æ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞.

---
