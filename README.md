**myApp** ‚Äî —É—á–µ–±–Ω—ã–π, –Ω–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–≥–æ—Ç–æ–≤—ã–π boilerplate-–ø—Ä–æ–µ–∫—Ç –Ω–∞ **Go 1.25.1 –∑–∞ NGINX**.
–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞, –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ –∏ API-—Å–µ—Ä–≤–∏—Å–æ–≤.

---

## ‚ö° –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* üåÄ –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ **Gin** ‚Äî –±—ã—Å—Ç—Ä–æ–º, –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ —Å middleware-—Ü–µ–ø–æ—á–∫–∞–º–∏.
* üîí –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **CSRF**, **CSP —Å nonce**, **HSTS**, **COOP**, **Referrer-Policy**.
* üì¶ –†–∞–±–æ—Ç–∞–µ—Ç –∑–∞ **NGINX** (—Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏): TLS, rate-limit, gzip, –∫—ç—à.
* üß© –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Core / App / Storage / HTTP / View) ‚âà Clean Architecture.
* üß± –ü–æ–¥–¥–µ—Ä–∂–∫–∞ MySQL (—á–µ—Ä–µ–∑ sqlx), —à–∞–±–ª–æ–Ω–æ–≤ Go, –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤.
* üß† –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º OWASP Top 10.

---

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**

```
myApp/
‚îú‚îÄ cmd/
‚îÇ  ‚îî‚îÄ app/
‚îÇ     ‚îî‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (ENV, CSRF-key, DB, graceful shutdown)
‚îÇ
‚îú‚îÄ internal/
‚îÇ  ‚îú‚îÄ app/
‚îÇ  ‚îÇ  ‚îî‚îÄ app.go               # Gin router, middleware, —Å—Ç–∞—Ç–∏–∫–∞, –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ  ‚îÇ
‚îÇ  ‚îú‚îÄ core/
      ‚îú‚îÄ auth.go              # Authorization (Bearer)
‚îÇ  ‚îÇ  ‚îú‚îÄ config.go            # –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ ENV
‚îÇ  ‚îÇ  ‚îú‚îÄ context.go           # CtxNonce, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∫–ª—é—á–∏
‚îÇ  ‚îÇ  ‚îú‚îÄ errors.go            # AppError (RFC 7807)
‚îÇ  ‚îÇ  ‚îú‚îÄ response.go          # JSON(), Fail() ‚Äî –µ–¥–∏–Ω—ã–π JSON-–æ—Ç–≤–µ—Ç
‚îÇ  ‚îÇ  ‚îú‚îÄ logger.go            # zerolog-–ª–æ–≥–∏ + —Ä–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
‚îÇ  ‚îÇ  ‚îî‚îÄ security.go          # CSP, HSTS, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îÇ  ‚îÇ
‚îÇ  ‚îú‚îÄ storage/                # –†–∞–±–æ—Ç–∞ —Å MySQL
‚îÇ  ‚îÇ  ‚îú‚îÄ db.go                # sqlx.DB, –∫–æ–Ω—Ç–µ–∫—Å—Ç, Close()
‚îÇ  ‚îÇ  ‚îú‚îÄ migrations.go        # –ê–≤—Ç–æ–º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ  ‚îÇ  ‚îî‚îÄ products_repo.go     # Product, ListAll, GetByID
‚îÇ  ‚îÇ
‚îÇ  ‚îú‚îÄ http/
‚îÇ  ‚îÇ  ‚îî‚îÄ handler/
‚îÇ  ‚îÇ     ‚îú‚îÄ home.go           # /
‚îÇ  ‚îÇ     ‚îú‚îÄ about.go          # /about
‚îÇ  ‚îÇ     ‚îú‚îÄ form.go           # /form GET / POST
‚îÇ  ‚îÇ     ‚îú‚îÄ catalog.go        # /catalog
‚îÇ  ‚îÇ     ‚îú‚îÄ show_product.go        # /product/:id
‚îÇ  ‚îÇ     ‚îú‚îÄ notfound.go       # 404
‚îÇ  ‚îÇ     ‚îî‚îÄ debug.go          # /debug (JSON)
‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ view/
‚îÇ     ‚îî‚îÄ templates.go         # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä HTML-—à–∞–±–ª–æ–Ω–æ–≤
‚îÇ
‚îú‚îÄ migrations/
‚îÇ  ‚îî‚îÄ 001_schema.sql          # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –¥–µ–º–æ-—Ç–æ–≤–∞—Ä–æ–≤
‚îÇ
‚îú‚îÄ web/
‚îÇ  ‚îú‚îÄ assets/                 # CSS/JS/—à—Ä–∏—Ñ—Ç—ã/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ  ‚îî‚îÄ templates/
‚îÇ     ‚îú‚îÄ layouts/base.gohtml
‚îÇ     ‚îú‚îÄ partials/{nav,footer}.gohtml
‚îÇ     ‚îî‚îÄ pages/{home,about,form,catalog,product,404}.gohtml
‚îÇ
‚îú‚îÄ logs/                      # info- –∏ error-–ª–æ–≥–∏ —Å –¥–∞—Ç–æ–π
‚îú‚îÄ nginx.conf                 # –ì–æ—Ç–æ–≤—ã–π reverse-proxy (TLS, gzip, cache)
‚îú‚îÄ go.mod / go.sum
‚îî‚îÄ Makefile / make.bat

```

---
- core/logger.go:
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Zerolog, –≤–∫–ª—é—á–∞—é—â–∞—è –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ –∏ –º–µ—Ö–∞–Ω–∏–∑–º –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤.
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: InitDailyLog, LogInfo, LogError.

- core/security.go:
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: Middleware –¥–ª—è Gin, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–µ–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CSP, Referrer-Policy, Permissions-Policy).
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: SecureHeaders, CSPBasic, CSPAllowInlineStyles, CSPStrictLocalOnly.

- core/response.go:
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ API –∏ –æ—à–∏–±–æ–∫ –≤ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ RFC 7807 (Problem Details for HTTP APIs).
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: JSON, FailC.

- core/errors.go:
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (AppError) –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –µ–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è.
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: Internal, From, –∏ –ø–æ–∑–¥–Ω–µ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ Forbidden.

- core/context.go:
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –¥–ª—è context.Context, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã CtxNonce, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã CSP.

- core/config.go:
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è Prod-—Ä–µ–∂–∏–º–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π.
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: Load, fatalConfigError (–æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –æ—à–∏–±–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏).

- app/app.go (–≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä):
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –¢–æ—á–∫–∞ —Å–±–æ—Ä–∫–∏ Gin-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ middleware –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (RequestID, –¢–∞–π–º–∞—É—Ç, Nonce/DB –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç, –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, CSP, –°–µ—Å—Å–∏–∏, CSRF).
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: New, RequestTimeout, withNonceAndDB.

- main.go (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞):
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é (–ª–æ–≥–∏, –ë–î, –º–∏–≥—Ä–∞—Ü–∏–∏), –¥–µ—Ä–∏–≤–∞—Ü–∏—é CSRF-–∫–ª—é—á–∞, –∑–∞–ø—É—Å–∫ HTTP-—Å–µ—Ä–≤–µ—Ä–∞ –∏ Graceful Shutdown.
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: main, deriveSecureKey.

- view/templates.go:
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–∞—Ä—Å–∏—Ç –∏ –∫—ç—à–∏—Ä—É–µ—Ç HTML-—à–∞–±–ª–æ–Ω—ã, –∞ —Ç–∞–∫–∂–µ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ (PageData), –∏–∑–≤–ª–µ–∫–∞—è –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—è —Ç–æ–∫–µ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CSRF –∏ CSP Nonce) –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ HTML.
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: New, Render.

---


```
## üåê **–ú–∞—Ä—à—Ä—É—Ç—ã**


| –ü—É—Ç—å           | –û–ø–∏—Å–∞–Ω–∏–µ                    | –¢–∏–ø    |
| -------------- | --------------------------- | ------ |
| `/`            | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞            | HTML   |
| `/about`       | –û –ø—Ä–æ–µ–∫—Ç–µ                   | HTML   |
| `/form` GET    | –§–æ—Ä–º–∞ —Å CSRF –∏ nonce        | HTML   |
| `/form` POST   | –í–∞–ª–∏–¥–∞—Ü–∏—è, —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è, PRG | HTML   |
| `/catalog`     | –ö–∞—Ç–∞–ª–æ–≥ –∏–∑ MySQL            | HTML   |
| `/product/:id` | –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞             | HTML   |
| `/debug`       | JSON –æ—Ç–≤–µ—Ç (health/info)    | JSON   |
| `/assets/*`    | –°—Ç–∞—Ç–∏–∫–∞ (CSS, JS, img)      | Static |
| `/*`           | 404 Not Found               | HTML   |

---

## üîê **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**

| –ú–µ—Ö–∞–Ω–∏–∑–º               | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è / Middleware      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                        |
| ---------------------- | ---------------------------- | --------------------------------- |
| **CSRF**               | utrack/gin-csrf              | –¢–æ–∫–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ö, Secure –≤ prod     |
| **CSP + nonce**        | core.SecureHeaders           | –ó–∞—â–∏—Ç–∞ inline-—Å–∫—Ä–∏–ø—Ç–æ–≤            |
| **X-Frame-Options**    | core.SecureHeaders           | `DENY` (–æ—Ç clickjacking)          |
| **X-Content-Type**     | core.SecureHeaders           | `nosniff`                         |
| **Referrer-Policy**    | core.SecureHeaders           | `strict-origin-when-cross-origin` |
| **Permissions-Policy** | core.SecureHeaders           | –û—Ç–∫–ª—é—á–µ–Ω—ã camera, microphone, geo |
| **COOP**               | core.SecureHeaders           | `same-origin` –∏–∑–æ–ª—è—Ü–∏—è            |
| **HSTS**               | core.HSTS (–≤ prod)           | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π HTTPS              |
| **Timeout**            | app.RequestTimeout           | –ü—Ä–µ—Ä—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å—à–∏–µ –∑–∞–ø—Ä–æ—Å—ã        |
| **Rate Limit**         | NGINX (limit_req)            | –ó–∞—â–∏—Ç–∞ –æ—Ç DoS                     |
| **Sanitization**       | handler/form.go ‚Üí bluemonday | –û—á–∏—Å—Ç–∫–∞ HTML                      |
| **TLS**                | NGINX + Let‚Äôs Encrypt        | HTTPS, —à–∏—Ñ—Ä—ã TLS 1.2+             |
| **Trusted Proxies**    | r.SetTrustedProxies()        | –ü—Ä–æ–≤–µ—Ä–∫–∞ X-Forwarded-For/Proto    |

---

## üß© **–§–æ—Ä–º–∞ `/form`**

* **GET** ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã —Å CSRF –∏ nonce
* **POST** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è (validator/v10), —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è (bluemonday)
* **–û—à–∏–±–∫–∏** ‚Äî —Ä–µ—Ä–µ–Ω–¥–µ—Ä —Ñ–æ—Ä–º—ã —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
* **–£—Å–ø–µ—Ö** ‚Äî PRG-—Ä–µ–¥–∏—Ä–µ–∫—Ç (303 ‚Üí /form?ok=1)
* **–ë–µ–∑ –ë–î/email** ‚Äî —á–∏—Å—Ç—ã–π –ø—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ —Ä–µ–Ω–¥–µ—Ä–∞

---


## ‚úÖ **–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç               | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                       |
| ----------------------- | ------ | --------------------------------- |
| CSRF (utrack)           | ‚úÖ      | –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ middleware         |
| CSP —Å nonce             | ‚úÖ      | SecureHeaders + nonce –≤ —à–∞–±–ª–æ–Ω–∞—Ö  |
| HSTS (prod)             | ‚úÖ      | –í–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ —Ñ–ª–∞–≥—É `SECURE=true` |
| Graceful Shutdown       | ‚úÖ      | –ö–æ–Ω—Ç–µ–∫—Å—Ç + —Ç–∞–π–º–∞—É—Ç                |
| –í–∞–ª–∏–¥–∞—Ü–∏—è / –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è | ‚úÖ      | validator/v10 + bluemonday        |
| JSON-–ª–æ–≥–∏               | ‚úÖ      | zerolog + —Ä–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤          |
| 404 / Debug             | ‚úÖ      | HTML + JSON healthcheck           |
| NGINX rate limit        | ‚úÖ      | 100 req/s + burst 200             |
| Trusted Proxy           | ‚úÖ      | SetTrustedProxies + X-Forwarded   |

---

## üöÄ **–ó–∞–ø—É—Å–∫**

| –ö–æ–º–∞–Ω–¥–∞            | –û–ø–∏—Å–∞–Ω–∏–µ                       |
| ------------------ | ------------------------------ |
| `.\make.bat run`   | –ó–∞–ø—É—Å–∫ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤           |
| `.\make.bat build` | –°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ (bin/app.exe) |
| `.\make.bat start` | –ó–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞    |
| `.\make.bat clean` | –û—á–∏—Å—Ç–∫–∞ –ø–∞–ø–∫–∏ bin              |
| `.\make.bat test`  | –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ Go               |
| `.\make.bat lint`  | –õ–∏–Ω—Ç–∏–Ω–≥ golangci-lint          |
| `.\make.bat tidy`  | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π        |

```
---

–ö–æ–≥–¥–∞ —É –≤–∞—Å –ø–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç IDOR –¥–ª—è –≤—Å–µ—Ö –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ 
(—Ç–µ—Ö, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é).üí° 

### –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã IDOR
- IDOR —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ Insecure Direct Object Reference(–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ü—Ä—è–º–∞—è –°—Å—ã–ª–∫–∞ –Ω–∞ –û–±—ä–µ–∫—Ç).

–°—É—Ç—å IDOR-–∞—Ç–∞–∫–∏–≠—Ç–æ —Ç–∏–ø —É—è–∑–≤–∏–º–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, 
–∫–æ—Ç–æ—Ä—ã–µ –µ–º—É –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç, –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –Ω–∞–ø—Ä—è–º—É—é —Å—Å—ã–ª–∞—é—â–µ–≥–æ—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
–ì–¥–µ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
–ü—Ä–∏–º–µ—Ä —É—è–∑–≤–∏–º–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ URL:
- –ø–∞—Ä–∞–º–µ—Ç—Ä GET /orders/show?id=123 (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1 –º–µ–Ω—è–µ—Ç 123 –Ω–∞ 456, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —á—É–∂–æ–π –∑–∞–∫–∞–∑.)
–°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ —Ñ–æ—Ä–º—ã<input type="hidden" name="user_id" value="456"> 
(–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1 –º–µ–Ω—è–µ—Ç ID –Ω–∞ 456, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.)
API-–∑–∞–ø—Ä–æ—Å GET /api/v1/users/456/documents (–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.)

### –ö–∞–∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å
–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å IDOR ‚Äî —ç—Ç–æ –≤—Å–µ–≥–¥–∞, –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π, –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, 
—á—Ç–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–ª –∑–∞–ø—Ä–æ—Å:
–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä) –ò–õ–ò
–Ø–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞:
–Ω–∞–ø—Ä–∏–º–µ—Ä, $${order.user\_id == current\_user.id}$$ 
–í–∞—à –∫–æ–¥ –≤ product.go –∏ products_repo.go —Å–µ–π—á–∞—Å –Ω–µ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤, 
–Ω–æ –±—É–¥–µ—Ç —É—è–∑–≤–∏–º–æ –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–∞–∫ —è –ø–æ–∫–∞–∑–∞–ª –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ AND user_id = ? –≤ SQL-–∑–∞–ø—Ä–æ—Å).


---

## üß† **–î–∞–ª—å–Ω–µ–π—à–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**

* `/api/*` ‚Äî JSON API —á–µ—Ä–µ–∑ core.JSON/Fail
* JWT / Session-Auth (—á–µ—Ä–µ–∑ gin-sessions)
* `/metrics` ‚Äî Prometheus –º–µ—Ç—Ä–∏–∫–∏
* `/admin/*` ‚Äî CRUD –ø–∞–Ω–µ–ª—å (—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π)
* CI/CD ‚Äî GitHub Actions (lint + test + build)
* –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî `httptest`, `govulncheck`, OWASP ZAP

---

üß© **–ò—Ç–æ–≥:**
–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π Go-–ø—Ä–æ–µ–∫—Ç,
–≥–æ—Ç–æ–≤—ã–π –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –∑–∞ NGINX ‚Äî —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, CSRF + CSP + HSTS,
JSON-–ª–æ–≥–∏ –∏ —à–∞–±–ª–æ–Ω—ã —Å nonce.



# –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ (—Ç–∞–±–ª–∏—Ü–∞)

| –°–ø—Ä–∏–Ω—Ç | –¶–µ–ª—å                | –ö–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏                                                                                                     | –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã/–∫—Ä–∏—Ç–µ—Ä–∏–∏ ‚Äú–≥–æ—Ç–æ–≤–æ‚Äù                                                      | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | –ü–∞–∫–µ—Ç—ã/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã                                      |
| ------ | ------------------- | ------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------- | ----------- | ------------------------------------------------------- |
| 1      | –ö–∞—Ä–∫–∞—Å + SSR-–±–∞–∑–∞   | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞; chi + middleware; layout + `/`, `/catalog` (–º–æ–∫–∏); —Å—Ç–∞—Ç–∏–∫–∞; healthcheck; Makefile                | `go run` —Å—Ç–∞—Ä—Ç—É–µ—Ç; `/` –∏ `/catalog` –æ—Ç–¥–∞—é—Ç HTML; `/healthz`=200; –ª–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç | ‚Äî           | `chi`, `chi/middleware`, `golangci-lint`                |
| 2      | –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–∏       | Docker Postgres; `migrations/0001_init.sql`; pgx; sqlc; –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `repo`                                           | `make migrate_up`; –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç `repo.Product.List()` –∑–µ–ª—ë–Ω—ã–π             | 1           | `pgx/v5`, `golang-migrate`, `sqlc`, `testcontainers-go` |
| 3      | –ö–∞—Ç–∞–ª–æ–≥ + —Ç–æ–≤–∞—Ä     | Handlers `/catalog`, `/catalog/{sku}`; —à–∞–±–ª–æ–Ω—ã; –ø–æ–∏—Å–∫/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞; seed –¥–∞–Ω–Ω—ã—Ö                                       | –ö–∞—Ç–∞–ª–æ–≥ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∏–∑ –ë–î; –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è; `httptest` –Ω–∞ –ª–∏—Å—Ç–∏–Ω–≥     | 2           | stdlib `net/http/httptest`                              |
| 4      | –ö–æ—Ä–∑–∏–Ω–∞ + Checkout  | –°–µ—Å—Å–∏–∏; `CartService`; `/cart`, `/checkout` (GET/POST); —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è Order                                            | –ü–æ–ª–Ω—ã–π –ø—É—Ç—å: –∫–∞—Ç–∞–ª–æ–≥ ‚Üí –∫–æ—Ä–∑–∏–Ω–∞ ‚Üí –∑–∞–∫–∞–∑ ‚Üí success; –∑–∞–ø–∏—Å—å –≤ –ë–î                    | 3           | `scs/v2` (sessions)                                     |
| 5      | –ê–¥–º–∏–Ω–∫–∞             | `/admin/login`; AuthService (bcrypt/argon2id); CRUD —Ç–æ–≤–∞—Ä–æ–≤; CSRF                                                   | –ê–¥–º–∏–Ω –ª–æ–≥–∏–Ω–∏—Ç—Å—è; —Å–æ–∑–¥–∞—ë—Ç/—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä; CSRF –≤–∫–ª—é—á—ë–Ω; rate-limit –ª–æ–≥–∏–Ω–∞      | 4           | `argon2id` –∏–ª–∏ `bcrypt`, `nosurf`, `httprate`           |
| 6      | JSON API + OpenAPI  | `/api/v1/products`, `/api/v1/product/{sku}`, `/api/v1/cart`, `/api/v1/order`; –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫; OpenAPI         | –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤ `api/openapi.yaml`; –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ                        | 3‚Äì5         | `kin-openapi` + `oapi-codegen` (–∏–ª–∏ swaggo)             |
| 7      | –ü—Ä–æ–¥–æ–≤–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | CSP/HSTS; TLS –∑–∞ reverse-proxy; `/metrics`; structured logs; Dockerfile/compose; CI (lint/test/build/image); –±—ç–∫–∞–ø—ã | HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç; Grafana –≤–∏–¥–∏—Ç –º–µ—Ç—Ä–∏–∫–∏; –æ–±—Ä–∞–∑ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è; nightly backup         | 1‚Äì6         | `promhttp`, `slog`, Docker, Compose, GitHub Actions     |
| 8      | –ü–æ–ª–∏—Ä–æ–≤–∫–∞/UX/SEO    | –ß–∏—Å—Ç—ã–π UI; i18n ru/fi; favicon, sitemap, robots; –º–æ–±–∏–ª—å–Ω—ã–π UX                                                       | Lighthouse ok; –±–∞–∑–æ–≤–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è; SEO-—Ç–µ–≥–∏                                     | 1‚Äì7         | ‚Äî                                                       |

---