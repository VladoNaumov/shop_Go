
***–ü—Ä–æ–µ–∫—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –º–∞–≥–∞–∑–∏–Ω–∞ ( Go 1.25.1 )***

## Task 1. 

### **—è–¥—Ä–æ WEB server**

```
myApp/
‚îú‚îÄ cmd/
‚îÇ  ‚îî‚îÄ app/
‚îÇ     ‚îî‚îÄ main.go                 # –∑–∞–ø—É—Å–∫ HTTP-—Å–µ—Ä–≤–µ—Ä–∞, graceful shutdown, CSRF, HSTS
‚îú‚îÄ‚îÄ internal/
‚îÇ    ‚îî‚îÄ core/
‚îÇ       ‚îú‚îÄ‚îÄ server.go       // –§–∞–±—Ä–∏–∫–∞ http.Server —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ config.go       // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (AppName, Addr, Env, Secure, ...)
‚îÇ       ‚îú‚îÄ‚îÄ router.go       // –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (chi.Router)
‚îÇ       ‚îú‚îÄ‚îÄ common.go       // –ë–∞–∑–æ–≤—ã–µ middleware (–ª–æ–≥, recover, timeout, CSP)
‚îÇ       ‚îú‚îÄ‚îÄ security.go     // –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CSP, XFO, MIME, Referrer)
‚îÇ       ‚îú‚îÄ‚îÄ logger.go       // –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
‚îÇ       ‚îú‚îÄ‚îÄ errors.go       // —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
‚îÇ       ‚îî‚îÄ‚îÄ response.go     // —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
```

---

### üîß –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                                                         |
|--------------------------| ---------------------------------------------------------------------------------- |
| **`main.go`**            | –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –∑–∞–ø—É—Å–∫–∞. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ª–æ–≥–≥–µ—Ä, –∫–æ–Ω—Ñ–∏–≥, CSRF, HSTS –∏ graceful shutdown. |
| **`config.go`**          | –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ. –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–µ–∑ `.env`.                |
| **`server.go`**          | –°–æ–∑–¥–∞—ë—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–π `http.Server` —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ –±–∞–∑–æ–≤–æ–π –∑–∞—â–∏—Ç–æ–π –æ—Ç slow clients.   |
| **`common.go`**          | –ü–æ–¥–∫–ª—é—á–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ middleware (–ª–æ–≥, IP, panic-recover, timeout, CSP).          |
| **`security.go`**        | –î–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CSP, X-Frame-Options, Referrer-Policy –∏ –¥—Ä.).    |

---


–í–æ—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ ‚Äî **–≤—Å—ë, —á—Ç–æ –æ–±—ã—á–Ω–æ –≤—Ö–æ–¥–∏—Ç –≤ —è–¥—Ä–æ (`/internal/core`)** —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

---

### üß© –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —è–¥—Ä–∞

1. `config.go` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. `server.go` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ HTTP-—Å–µ—Ä–≤–µ—Ä–∞
3. `router.go` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
4. `common.go` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–±—â–∏—Ö middleware
5. `security.go` ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
6. `logger.go` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–≥–µ—Ä–∞
7. `errors.go` ‚Äî —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
8. `response.go` ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è HTTP-–æ—Ç–≤–µ—Ç–æ–≤ (JSON, error, redirect)

---

### ‚öôÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ) —Ñ–∞–π–ª—ã —è–¥—Ä–∞

9. `context.go` ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `context.Context` (userID, traceID –∏ —Ç.–ø.)
10. `utils.go` ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (—Ö—ç—à, UUID, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤—Ä–µ–º—è)
11. `graceful.go` ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è graceful shutdown (–µ—Å–ª–∏ –Ω–µ –≤ main)
12. `env.go` ‚Äî —á—Ç–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∏—Ö –≤–∞–ª–∏–¥–∞—Ü–∏—è
13. `metrics.go` ‚Äî –º–µ—Ç—Ä–∏–∫–∏ (Prometheus, health-check)
14. `buildinfo.go` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–±–æ—Ä–∫–µ (–≤–µ—Ä—Å–∏—è, commit, –¥–∞—Ç–∞)

---

üìò
–¢–≤–æ–∏ —Ç–µ–∫—É—â–∏–µ —Ñ–∞–π–ª—ã:
`config.go`, `server.go`, `common.go`, `security.go`, `router.go` ‚Äî ‚úÖ —É–∂–µ –≥–æ—Ç–æ–≤—ã.
–û—Å—Ç–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å:
‚û°Ô∏è `logger.go`, `errors.go`, `response.go` ‚Äî —á—Ç–æ–±—ã —è–¥—Ä–æ –±—ã–ª–æ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–æ –∏ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ**.

---

## Task 2.

–¥–æ–±–∞–≤–∏—Ç—å **—Ä–æ—É—Ç–µ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/`, `/form`, `/about`, `/api/...`),
—á—Ç–æ–±—ã —Å–µ—Ä–≤–µ—Ä –Ω–∞—á–∞–ª **–æ—Ç–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ JSON-–æ—Ç–≤–µ—Ç—ã**.


---

‚úÖ **–†–∞–±–æ—á–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**

* `/` ‚Äî –≥–ª–∞–≤–Ω–∞—è
* `/about` ‚Äî –æ –∫–æ–º–ø–∞–Ω–∏–∏
* `/form` (GET/POST) ‚Äî —Ñ–æ—Ä–º–∞ —Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º `303` –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏

---

## üîπ –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

1Ô∏è‚É£ –°–æ–∑–¥–∞—ë—à—å —Ñ–∞–π–ª `web/templates/pages/contacts.gohtml`:

```html
{{ define "content" }}
<h1>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h1>
<p>–ù–∞—à –∞–¥—Ä–µ—Å: Hamina...</p>
{{ end }}
```

2Ô∏è‚É£ –°–æ–∑–¥–∞—ë—à—å `internal/http/handler/contacts.go`:

```go
package handler
import (
  "html/template"
  "net/http"
)

func Contacts(w http.ResponseWriter, r *http.Request) {
  tpl := template.Must(template.ParseFiles(
    "web/templates/layouts/base.gohtml",
    "web/templates/partials/nav.gohtml",
    "web/templates/partials/footer.gohtml",
    "web/templates/pages/contacts.gohtml",  // <--- new
  ))
  w.Header().Set("Content-Type", "text/html; charset=utf-8")
  _ = tpl.ExecuteTemplate(w, "base", struct{ Title string }{"–ö–æ–Ω—Ç–∞–∫—Ç—ã"})
}
```

3Ô∏è‚É£ –î–æ–±–∞–≤—å –º–∞—Ä—à—Ä—É—Ç –≤ `router.go`:

```go

r.Get("/contacts", handler.Contacts)

```

# –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å

* Windows (–±–∞—Ç–Ω–∏–∫): `make run`
  –∏–ª–∏: `go run ./cmd/app`
* –ï—Å–ª–∏ —É–¥–∞–ª—è–ª `go.mod`: `go mod init myApp && go mod tidy`



# –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ ‚úÖ

* **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–±–µ–∑ embed)**: `cmd/app`, `internal/{app,config,http}`, `web/templates`.
* **–ú–∞—Ä—à—Ä—É—Ç—ã**: `/`, `/about`, `/form` (GET/POST —Å PRG).
* **–®–∞–±–ª–æ–Ω—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã per-page**: –∫–∞–∂–¥—ã–π —Ö–µ–Ω–¥–ª–µ—Ä –ø–∞—Ä—Å–∏—Ç **—Å–≤–æ–π** `pages/<page>.gohtml` + –æ–±—â–∏–π `base/nav/footer`.
* **CSRF middleware**: –ø–æ–¥–∫–ª—é—á—ë–Ω –≤ `cmd/app/main.go` —á–µ—Ä–µ–∑ `csrf.Protect(...)`.
* **–ö–æ–Ω—Ñ–∏–≥** config.go
* **–¢–∞–π–º–∞—É—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞**: `internal/app/server.go`.
* **HSTS –≤ prod**: –º–∏–¥–ª–≤–∞—Ä—å `hsts` –≤ `main.go` (–≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `APP_ENV=prod`).
* **–ó–∞–ø—É—Å–∫/—Å–±–æ—Ä–∫–∞**: `make run`, `make build`, `make start`.


--

## üß© **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**

| ‚Ññ     | –†–∞–∑–¥–µ–ª                           | –°—Ç–∞—Ç—É—Å            | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                                                                                                                               |
| ----- | -------------------------------- | ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **1** | **CSRF –≤ —à–∞–±–ª–æ–Ω–∞—Ö**              | ‚úÖ **–°–¥–µ–ª–∞–Ω–æ**     | CSRF-—Ç–æ–∫–µ–Ω –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `csrf.TemplateField(r)` –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ `{{ .CSRFField }}`. –í—Å–µ —Ñ–æ—Ä–º—ã –∑–∞—â–∏—â–µ–Ω—ã (`FormIndex`, `FormSubmit`, —à–∞–±–ª–æ–Ω `form.gohtml`).               |
| **2** | **Middleware + –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**    | ‚úÖ **–°–¥–µ–ª–∞–Ω–æ**     | –ü–æ–¥–∫–ª—é—á–µ–Ω—ã `recover`, `timeout(15s)`, `logger`, `CSP`, `X-Frame-Options`, `Referrer-Policy`, `X-Content-Type-Options`. –í—Å—ë –≤ `core/common.go` –∏ `core/secure_headers.go`. |
| **3** | **–ö–æ–Ω—Ñ–∏–≥ (CSRF_KEY, HSTS)**      | ‚úÖ **–°–¥–µ–ª–∞–Ω–æ**     | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`core/config.go`), –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –≤ prod, `HSTS` –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ `Secure=true`.                                 |
| **4** | **UX —Ñ–æ—Ä–º—ã (–≤–∞–ª–∏–¥–∞—Ü–∏—è + flash)** | ‚úÖ **–°–¥–µ–ª–∞–Ω–æ**     | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `go-playground/validator/v10`. –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫, flash –ø—Ä–∏ `?ok=1`. –í—Å—ë —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ.                                                  |
| **5** | **–°—Ç–∞—Ç–∏–∫–∞ / Cache-Control**      | ‚úÖ **–°–¥–µ–ª–∞–Ω–æ**     | `cacheStatic()` –¥–æ–±–∞–≤–ª—è–µ—Ç `Cache-Control: public, max-age=31536000, immutable` –∏ `Vary: Accept-Encoding` —Ç–æ–ª—å–∫–æ –≤ prod. –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –≤ `core/router.go`.                    |
| **6** | **–¢–µ—Å—Ç—ã + –∫–∞—á–µ—Å—Ç–≤–æ**             | üöß **–í –ø—Ä–æ—Ü–µ—Å—Å–µ** | –ü–æ–∫–∞ –Ω–µ—Ç `httptest` –¥–ª—è `FormSubmit` –∏ `FormIndex`, –∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω `golangci-lint`. –ü–ª–∞–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥.                                                                 |

---

## üöÄ **–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å (—Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏)**

### 1. **–¢–µ—Å—Ç—ã**

* –ù–∞–ø–∏—Å–∞—Ç—å `httptest` –¥–ª—è `FormIndex` –∏ `FormSubmit`:

    * –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ 200/303/400
    * –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ CSRF-—Ç–æ–∫–µ–Ω –µ—Å—Ç—å –≤ HTML
    * –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º—ã
* –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç –¥–ª—è `cacheStatic()` (–∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫—ç—à–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç)
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `testing.T.Run` –¥–ª—è table-driven —Ç–µ—Å—Ç–æ–≤

### 2. **–õ–∏–Ω—Ç–µ—Ä—ã –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑**

* –î–æ–±–∞–≤–∏—Ç—å `golangci-lint` –≤ make-—Å–∫—Ä–∏–ø—Ç –∏–ª–∏ GitHub Actions.
  –ü—Ä–æ–≤–µ—Ä–∫–∏: `govet`, `gofmt`, `gocyclo`, `staticcheck`, `errcheck`.

### 3. **Dev / Prod UX**

* –î–æ–±–∞–≤–∏—Ç—å `.env.example` —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ (`APP_ENV`, `CSRF_KEY`, `SECURE`, `HTTP_ADDR`).
* –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ ‚Üí `APP_ENV=dev` (–±–µ–∑ HSTS, –±–µ–∑ Cache-Control).
* –î–ª—è –¥–µ–ø–ª–æ—è ‚Üí `APP_ENV=prod` + HTTPS + —Ä–µ–∞–ª—å–Ω—ã–π CSRF-–∫–ª—é—á.

---

## ‚úÖ **–ü—Ä–æ–µ–∫—Ç —Å–µ–π—á–∞—Å –≥–æ—Ç–æ–≤:**

* –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º—É –¥–µ–ø–ª–æ—é –≤ prod,
* —Å CSP, CSRF, HSTS, –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π, flash –∏ middleware,
* –∏ —Å –ª—ë–≥–∫–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (`core`, `handler`, `templates`).



---
## –∏—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
myApp/
‚îÇ
‚îú‚îÄ cmd/
‚îÇ  ‚îî‚îÄ app/
‚îÇ     ‚îî‚îÄ main.go                 # –∑–∞–ø—É—Å–∫ HTTP-—Å–µ—Ä–≤–µ—Ä–∞, graceful shutdown, CSRF, HSTS
‚îÇ
‚îú‚îÄ‚îÄinternal/
‚îÇ  ‚îú‚îÄ‚îÄ core/
‚îÇ  ‚îÇ    ‚îú‚îÄ‚îÄ server.go       // –§–∞–±—Ä–∏–∫–∞ http.Server —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏
‚îÇ  ‚îÇ    ‚îú‚îÄ‚îÄ config.go       // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (AppName, Addr, Env, Secure, ...)
‚îÇ  ‚îÇ    ‚îú‚îÄ‚îÄ router.go       //  –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (chi.Router)
‚îÇ  ‚îÇ    ‚îú‚îÄ‚îÄ common.go       // –ë–∞–∑–æ–≤—ã–µ middleware (–ª–æ–≥, recover, timeout, CSP)
‚îÇ  ‚îÇ    ‚îú‚îÄ‚îÄ security.go     // –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CSP, XFO, MIME, Referrer)
‚îÇ  ‚îÇ    ‚îú‚îÄ‚îÄ logger.go       // –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
‚îÇ  ‚îÇ    ‚îú‚îÄ‚îÄ errors.go       // —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
‚îÇ  ‚îÇ    ‚îî‚îÄ‚îÄ response.go     // —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ http/
‚îÇ     ‚îî‚îÄ handler/
‚îÇ        ‚îú‚îÄ home.go              # –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ        ‚îú‚îÄ form.go              # —Ñ–æ—Ä–º–∞ + PRG-—Ä–µ–¥–∏—Ä–µ–∫—Ç
‚îÇ        ‚îî‚îÄ about.go             # —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–û –Ω–∞—Å¬ª
‚îÇ
‚îÇ
‚îú‚îÄ web/
‚îÇ  ‚îî‚îÄ templates/
‚îÇ     ‚îú‚îÄ layouts/base.gohtml     # {{define "base"}} ... {{block "content" .}}{{end}} ... {{end}}
‚îÇ     ‚îú‚îÄ partials/nav.gohtml     # {{define "nav"}} ... {{end}}
‚îÇ     ‚îú‚îÄ partials/footer.gohtml  # {{define "footer"}} ... {{end}}
‚îÇ     ‚îî‚îÄ pages/
‚îÇ        ‚îú‚îÄ home.gohtml          # {{define "content"}} –∫–æ–Ω—Ç–µ–Ω—Ç –≥–ª–∞–≤–Ω–æ–π {{end}}
‚îÇ        ‚îú‚îÄ form.gohtml          # {{define "content"}} —Ñ–æ—Ä–º–∞ {{end}}
‚îÇ        ‚îî‚îÄ about.gohtml         # {{define "content"}} –æ –Ω–∞—Å {{end}}

‚îÇ
‚îú‚îÄ make.bat                      # –∑–∞–ø—É—Å–∫, —Å–±–æ—Ä–∫–∞, —Ç–µ—Å—Ç—ã, tidy; –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç .env
‚îú‚îÄ go.mod                        # module awesomeProject
‚îî‚îÄ go.sum
```

–∫–æ–º–ø–∞–∫—Ç–Ω—ã–π **–ø–ª–∞–Ω-–≥—Ä–∞—Ñ–∏–∫ MVP** –ø–æ —Å–ø—Ä–∏–Ω—Ç–∞–º —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –ø–∞–∫–µ—Ç–∞–º–∏ –∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ ‚Äú–≥–æ—Ç–æ–≤–æ‚Äù.

# –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ (—Ç–∞–±–ª–∏—Ü–∞)

| –°–ø—Ä–∏–Ω—Ç | –¶–µ–ª—å                | –ö–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏                                                                                                     | –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã/–∫—Ä–∏—Ç–µ—Ä–∏–∏ ‚Äú–≥–æ—Ç–æ–≤–æ‚Äù                                                      | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | –ü–∞–∫–µ—Ç—ã/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã                                      |
| ------ | ------------------- | ------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------- | ----------- | ------------------------------------------------------- |
| 1      | –ö–∞—Ä–∫–∞—Å + SSR-–±–∞–∑–∞   | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞; chi + middleware; layout + `/`, `/catalog` (–º–æ–∫–∏); —Å—Ç–∞—Ç–∏–∫–∞; healthcheck; Makefile                | `go run` —Å—Ç–∞—Ä—Ç—É–µ—Ç; `/` –∏ `/catalog` –æ—Ç–¥–∞—é—Ç HTML; `/healthz`=200; –ª–∏–Ω—Ç–µ—Ä –ø—Ä–æ—Ö–æ–¥–∏—Ç | ‚Äî           | `chi`, `chi/middleware`, `golangci-lint`                |
| 2      | –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–∏       | Docker Postgres; `migrations/0001_init.sql`; pgx; sqlc; –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `repo`                                           | `make migrate_up`; –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç `repo.Product.List()` –∑–µ–ª—ë–Ω—ã–π             | 1           | `pgx/v5`, `golang-migrate`, `sqlc`, `testcontainers-go` |
| 3      | –ö–∞—Ç–∞–ª–æ–≥ + —Ç–æ–≤–∞—Ä     | Handlers `/catalog`, `/catalog/{sku}`; —à–∞–±–ª–æ–Ω—ã; –ø–æ–∏—Å–∫/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞; seed –¥–∞–Ω–Ω—ã—Ö                                       | –ö–∞—Ç–∞–ª–æ–≥ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∏–∑ –ë–î; –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è; `httptest` –Ω–∞ –ª–∏—Å—Ç–∏–Ω–≥     | 2           | stdlib `net/http/httptest`                              |
| 4      | –ö–æ—Ä–∑–∏–Ω–∞ + Checkout  | –°–µ—Å—Å–∏–∏; `CartService`; `/cart`, `/checkout` (GET/POST); —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è Order                                            | –ü–æ–ª–Ω—ã–π –ø—É—Ç—å: –∫–∞—Ç–∞–ª–æ–≥ ‚Üí –∫–æ—Ä–∑–∏–Ω–∞ ‚Üí –∑–∞–∫–∞–∑ ‚Üí success; –∑–∞–ø–∏—Å—å –≤ –ë–î                    | 3           | `scs/v2` (sessions)                                     |
| 5      | –ê–¥–º–∏–Ω–∫–∞             | `/admin/login`; AuthService (bcrypt/argon2id); CRUD —Ç–æ–≤–∞—Ä–æ–≤; CSRF                                                   | –ê–¥–º–∏–Ω –ª–æ–≥–∏–Ω–∏—Ç—Å—è; —Å–æ–∑–¥–∞—ë—Ç/—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä; CSRF –≤–∫–ª—é—á—ë–Ω; rate-limit –ª–æ–≥–∏–Ω–∞      | 4           | `argon2id` –∏–ª–∏ `bcrypt`, `nosurf`, `httprate`           |
| 6      | JSON API + OpenAPI  | `/api/v1/products`, `/api/v1/product/{sku}`, `/api/v1/cart`, `/api/v1/order`; –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫; OpenAPI         | –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤ `api/openapi.yaml`; –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ                        | 3‚Äì5         | `kin-openapi` + `oapi-codegen` (–∏–ª–∏ swaggo)             |
| 7      | –ü—Ä–æ–¥–æ–≤–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | CSP/HSTS; TLS –∑–∞ reverse-proxy; `/metrics`; structured logs; Dockerfile/compose; CI (lint/test/build/image); –±—ç–∫–∞–ø—ã | HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç; Grafana –≤–∏–¥–∏—Ç –º–µ—Ç—Ä–∏–∫–∏; –æ–±—Ä–∞–∑ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è; nightly backup         | 1‚Äì6         | `promhttp`, `slog`, Docker, Compose, GitHub Actions     |
| 8      | –ü–æ–ª–∏—Ä–æ–≤–∫–∞/UX/SEO    | –ß–∏—Å—Ç—ã–π UI; i18n ru/fi; favicon, sitemap, robots; –º–æ–±–∏–ª—å–Ω—ã–π UX                                                       | Lighthouse ok; –±–∞–∑–æ–≤–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è; SEO-—Ç–µ–≥–∏                                     | 1‚Äì7         | ‚Äî                                                       |

---
