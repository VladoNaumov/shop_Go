
---

# üß± –®–∞–≥ 1 ‚Äî –∫–∞—Ä–∫–∞—Å SSR-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Go (chi + html/template)

## –û–±—â–∞—è –∏–¥–µ—è

–°–æ–±—Ä–∞–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—É—Å–∫–∞–µ–º—ã–π —Å–∞–π—Ç –±–µ–∑ –ë–î:
`/`, `/healthz`, `/readyz`, `/metrics`, —Å—Ç–∞—Ç–∏–∫–∞ –∏ –±–∞–∑–æ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

---

## ü©∫ `/healthz` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ ¬´–∂–∏–≤ –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å¬ª

**–ó–∞—á–µ–º:**
–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä **–≤–æ–æ–±—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω, HTTP —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç, –∫–æ–¥ –Ω–µ –∑–∞–≤–∏—Å.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
–ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `200 OK` –∏ JSON –≤—Ä–æ–¥–µ:

---

## ‚öôÔ∏è `/readyz` ‚Äî –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫

**–ó–∞—á–µ–º:**
–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´–∂–∏–≤–æ–µ¬ª, –∞ **–≥–æ—Ç–æ–≤–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ**.
–¢–æ –µ—Å—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ë–î, –∫—ç—à, –≤–Ω–µ—à–Ω–∏–µ API) –¥–æ—Å—Ç—É–ø–Ω—ã.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:**
–ø–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ `{"ready": true}`.
–Ω–æ –ø–æ–∑–∂–µ –º—ã —Ç—É–¥–∞ –¥–æ–±–∞–≤–∏–º, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```go
if err := db.Ping(ctx); err != nil {
    return {"ready": false, "db": "down"}
}
```

---

## üìä `/metrics` ‚Äî –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ó–∞—á–µ–º:**
–¥–ª—è —Å–∏—Å—Ç–µ–º –Ω–∞–±–ª—é–¥–µ–Ω–∏—è (Prometheus, Grafana, Zabbix –∏ —Ç.–¥.).
–ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –º–µ—Ç—Ä–∏–∫–∞–º–∏:

* –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤,
* –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞,
* –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏,
* goroutines, GC –∏ —Ç.–¥.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
–º—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏ –≥–æ—Ç–æ–≤—ã–π handler –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Prometheus:

```go
r.Handle("/metrics", promhttp.Handler())
```

–û–Ω –æ—Ç–¥–∞—ë—Ç –±–æ–ª—å—à–æ–π —Ç–µ–∫—Å—Ç –≤—Ä–æ–¥–µ:

```
go_gc_duration_seconds 0.0002
http_requests_total{method="GET",path="/"} 23
```

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:**
–≤—Å—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã.

**–ê–Ω–∞–ª–æ–≥–∏—è:**
—ç—Ç–æ –∫–∞–∫ —Ñ–∏—Ç–Ω–µ—Å-–±—Ä–∞—Å–ª–µ—Ç –Ω–∞ —Ç–≤–æ—ë–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: –æ–Ω–æ –∂–∏–≤–æ, –≥–æ—Ç–æ–≤–æ, –∏ –º—ã –≤–∏–¥–∏–º, –∫–∞–∫ —á–∞—Å—Ç–æ ¬´–ø—É–ª—å—Å–∏—Ä—É–µ—Ç¬ª.

---

## üí° –ü–æ–¥–≤–µ–¥—ë–º –∏—Ç–æ–≥–∏

| Endpoint   | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç                      | –ö—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç               | –ö–æ–≥–¥–∞ –≤–∞–∂–µ–Ω            |
| ---------- | ---------------------------------- | ---------------------------- | ---------------------- |
| `/healthz` | –∂–∏–≤ –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å                     | –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, kubernetes       | –≤—Å–µ–≥–¥–∞                 |
| `/readyz`  | –≥–æ—Ç–æ–≤ –ª–∏ –∫ —Ä–∞–±–æ—Ç–µ (–ë–î, –∫—ç—à –∏ —Ç.–ø.) | –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∏, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ã | –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ |
| `/metrics` | –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏      | Prometheus, Grafana          | –ø–æ—Å—Ç–æ—è–Ω–Ω–æ              |

---

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

### **cmd/app/main.go**

–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥, —Å–æ–∑–¥–∞—ë—Ç —Ä–æ—É—Ç–µ—Ä, –ø–æ–¥–Ω–∏–º–∞–µ—Ç HTTP-—Å–µ—Ä–≤–µ—Ä —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ graceful shutdown.

---

### **internal/config/config.go**

–ß–∏—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`APP_NAME`, `APP_ENV`, `HTTP_ADDR`).
–§–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É Config —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

---

### **internal/platform/server.go**

–§–∞–±—Ä–∏–∫–∞ `http.Server` —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤.
–ó–∞—â–∏—Ç–∞ –æ—Ç –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –±–∞–∑–æ–≤—ã—Ö DoS-–∞—Ç–∞–∫.

---

### **internal/transport/httpx/middleware.go**

–ù–∞–±–æ—Ä –æ–±—â–∏—Ö middleware:
gzip, timeout, recoverer, real IP, request ID, –ª–æ–≥–≥–µ—Ä, secure headers (CSP –∏ –¥—Ä.).
–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å.

---

### **internal/transport/httpx/router.go**

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã:
`/`, `/healthz`, `/readyz`, `/metrics`, `/assets/*`.
–ü–æ–¥–∫–ª—é—á–∞–µ—Ç middleware –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫ 404/405.
–°–ª—É–∂–∏—Ç –∞–Ω–∞–ª–æ–≥–æ–º —Ñ–∞–π–ª–∞ `routes/web.php` –≤ Laravel.

---

### **internal/transport/httpx/handlers/**

–°–æ–¥–µ—Ä–∂–∏—Ç "–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã" –∏ —Ö–µ–Ω–¥–ª–µ—Ä—ã.

* **health.go** ‚Äî —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `/healthz` –∏ `/readyz` (–ø–æ–∫–∞ –±–µ–∑ –ë–î).
* **home.go** ‚Äî SSR-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–ì–ª–∞–≤–Ω–∞—è¬ª: –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —à–∞–±–ª–æ–Ω—ã, —Ä–µ–Ω–¥–µ—Ä–∏—Ç –¥–∞–Ω–Ω—ã–µ.

---

### **web/templates/**

HTML-—à–∞–±–ª–æ–Ω—ã –¥–ª—è SSR.

* **layouts/base.tmpl** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π layout (–æ–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã).
* **partials/nav.tmpl** ‚Äî —à–∞–ø–∫–∞ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è.
* **partials/footer.tmpl** ‚Äî —Ñ—É—Ç–µ—Ä (–≥–æ–¥ —á–µ—Ä–µ–∑ {{year}}).
* **pages/home.tmpl** ‚Äî –∫–æ–Ω—Ç–µ–Ω—Ç –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

---

### **web/assets/css/style.css**

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è layout –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.
–ü–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ `/assets/css/style.css`.

---

### **.env.example**

–®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
–∏–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –ø–æ—Ä—Ç.

---

### **Makefile**

–£–ø—Ä–æ—â—ë–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
`make run` ‚Äî –∑–∞–ø—É—Å–∫,
`make tidy` ‚Äî —Å–±–æ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π,
`make test` ‚Äî –ø—Ä–æ–≥–æ–Ω —Ç–µ—Å—Ç–æ–≤.

---

### **go.mod**

–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`chi`, `prometheus/client_golang`).

---

## ‚úÖ –ß—Ç–æ —É–∂–µ –µ—Å—Ç—å

* –¢–∞–π–º–∞—É—Ç—ã –∏ –ª–∏–º–∏—Ç—ã HTTP-—Å–µ—Ä–≤–µ—Ä–∞
* –ê–≤—Ç–æ-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–Ω–∏–∫
* Gzip-—Å–∂–∞—Ç–∏–µ
* CSP –∏ –¥—Ä—É–≥–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
* –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
* /healthz, /readyz, /metrics
* Graceful shutdown

---

## üîú –î–∞–ª—å—à–µ (–®–∞–≥ 2)

–ü–æ–¥–∫–ª—é—á–∞–µ–º PostgreSQL —á–µ—Ä–µ–∑ Docker, –º–∏–≥—Ä–∞—Ü–∏–∏, sqlc –∏ —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ë–î –≤ /readyz.
